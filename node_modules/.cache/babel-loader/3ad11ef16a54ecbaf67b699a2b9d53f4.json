{"ast":null,"code":"import FormUpdate from \"@/components/FormUpdate.vue\";\nimport api from '@/services/api.ts';\nimport * as validations from '@/services/validation.ts';\nimport axios from 'axios';\nexport default {\n  name: \"users\",\n  props: true,\n  props: {\n    id: {\n      type: Number\n    }\n  },\n  components: {\n    FormUpdate\n  },\n  data: () => ({\n    title: \"\",\n    msg: \"\",\n    editing: false,\n    show1: false,\n    show2: false,\n    ConfirmPass: \"\",\n    formData: {\n      Id: 0,\n      Login: \"\",\n      Password: \"\",\n      Email: \"\"\n    },\n    loginRules: [v => v.length >= 4 || 'Min. 4 Caracteres', v => !!v || 'Login é Obrigatório'],\n    rules: {\n      required: value => !!value || 'Senha é Obrigatória.',\n      min: v => v.length >= 4 || 'Min. 4 Caracteres' //equal: value => value != this.formData.Password || 'Senha é Obrigatória.',\n\n    },\n    emailRules: [v => !!v || 'E-mail é Obrigatório.', v => /.+@.+\\..+/.test(v) || 'E-mail Invalido']\n  }),\n\n  created() {\n    this.id = this.$route.params.id;\n    this.title = \"Inserir Usuário\";\n\n    if (this.id > 0) {\n      this.title = \"Alterar Usuário\";\n      this.editing = true;\n      this.formData.Id = this.id;\n      this.getUser();\n    }\n  },\n\n  methods: {\n    cleanForm() {\n      this.formData.Login = \"\";\n      this.formData.Password = \"\";\n      this.formData.Email = \"\";\n    },\n\n    validacao() {\n      let retorno = true;\n\n      if (this.formData.Login.length == 0 || this.formData.Password.length == 0 || this.ConfirmPass == 0 || this.formData.Email.length == 0) {\n        retorno = false;\n        this.msg = \"Dados Incorretos!\";\n        setTimeout(() => this.msg = \"\", 3000);\n      }\n\n      return retorno;\n    },\n\n    async onSave() {\n      if (this.validacao() == true) {\n        if (this.editing == true) {\n          await api.put(`/Users/${this.id}`, this.formData).then(response => {}).catch(error => {\n            console.log(error.response);\n          });\n        } else {\n          console.log('aaaaa');\n          await api.post(`/Users`, this.formData).then(response => {\n            this.msg = response.data;\n          }).catch(error => {\n            console.log(error.response);\n          });\n        } //setTimeout(() => this.msg=\"\", 3000);\n\n\n        this.$router.go(-1);\n      }\n    },\n\n    async getUser() {\n      await api.get(\"/Users/\" + this.id).then(response => {\n        this.formData.Id = response.data.Id;\n        this.formData.Login = response.data.Login;\n        this.formData.Password = response.data.Password;\n        this.ConfirmPass = response.data.Password;\n        this.formData.Email = response.data.Email;\n      }).catch(error => {\n        console.log(error.response);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAqFA;AACA;AACA;AACA;AAEA;EACAA,aADA;EAEAC,WAFA;EAGAA;IACAC;MACAC;IADA;EADA,CAHA;EAQAC;IACAC;EADA,CARA;EAWAC;IACAC,SADA;IAEAC,OAFA;IAGAC,cAHA;IAIAC,YAJA;IAKAC,YALA;IAMAC,eANA;IAOAC;MACAC,KADA;MAEAC,SAFA;MAGAC,YAHA;MAIAC;IAJA,CAPA;IAaAC,aACAC,yCADA,EAEAA,iCAFA,CAbA;IAiBAC;MACAC,oDADA;MAEAC,8CAFA,CAGA;;IAHA,CAjBA;IAsBAC,aACAJ,mCADA,EAEAA,6CAFA;EAtBA,EAXA;;EAsCAK;IACA;IACA;;IACA;MACA;MACA;MACA;MACA;IACA;EACA,CA/CA;;EAgDAC;IACAC;MACA;MACA;MACA;IACA,CALA;;IAMAC;MACA;;MACA,uCACA,kCADA,IAEA,qBAFA,IAGA,+BAHA,EAGA;QACAC;QACA;QACAC;MACA;;MACA;IACA,CAjBA;;IAkBA;MACA;QACA;UACA,kDACAC,IADA,CACAC,aACA,CAFA,EAGAC,KAHA,CAGAC;YACAC;UACA,CALA;QAMA,CAPA,MAOA;UACAA;UACA,wCACAJ,IADA,CACAC;YACA;UACA,CAHA,EAIAC,KAJA,CAIAC;YACAC;UACA,CANA;QAOA,CAjBA,CAkBA;;;QACA;MACA;IACA,CAxCA;;IAyCA;MACA,mCACAJ,IADA,CACAC;QACA;QACA;QACA;QACA;QACA;MACA,CAPA,EAQAC,KARA,CAQAC;QACAC;MACA,CAVA;IAWA;;EArDA;AAhDA","names":["name","props","id","type","components","FormUpdate","data","title","msg","editing","show1","show2","ConfirmPass","formData","Id","Login","Password","Email","loginRules","v","rules","required","min","emailRules","created","methods","cleanForm","validacao","retorno","setTimeout","then","response","catch","error","console"],"sourceRoot":"src/views","sources":["Users-Register.vue"],"sourcesContent":["<template>\r\n  <div>\r\n  <FormUpdate \r\n      :title=\"this.title\"\r\n      :width=\"800\"\r\n      :maxHeight=\"350\"\r\n      @onSave=\"onSave\"\r\n      >\r\n      <template slot=\"body\">\r\n        \r\n        <!--CONTEUDO-->\r\n        <v-row>\r\n          <v-col>\r\n            \r\n            <v-form ref=\"formUsuarios\"\r\n                    @submit.prevent=\"onSave\"\r\n                    autocomplete=\"off\">\r\n              <v-container>\r\n                <v-row>\r\n                  <v-col cols=\"4\"\r\n                        style=\"display: inline-block\">\r\n                        <v-text-field\r\n                        v-model=\"formData.Login\"\r\n                        :rules=\"loginRules\"\r\n                        label=\"Login\"\r\n                        :value=\"formData.Login= (formData.Login == null) ? formData.Login : formData.Login.toUpperCase()\"\r\n                        required\r\n                      ></v-text-field>\r\n                  </v-col>\r\n                  <v-col cols=\"4\"\r\n                        style=\"display: inline-block\">\r\n                        <v-text-field\r\n                          v-model=\"formData.Password\"\r\n                          :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                          :type=\"show1 ? 'text' : 'password'\"\r\n                          :rules=\"[rules.required, rules.min]\"\r\n                          @click:append=\"show1 = !show1\"\r\n                          hint=\"Min. 4 Caracteres\"\r\n                          label=\"Senha\"\r\n                          :value=\"formData.Password = (formData.Password == null) ? formData.Password : formData.Password.toUpperCase()\"\r\n                          required\r\n                        ></v-text-field>\r\n                  </v-col>\r\n                  <v-col cols=\"4\"\r\n                        style=\"display: inline-block\">\r\n                        <v-text-field\r\n                          v-model=\"this.ConfirmPass\"\r\n                          :append-icon=\"show2 ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                          :type=\"show2 ? 'text' : 'password'\"\r\n                          :rules=\"[rules.required, rules.min]\"\r\n                          @click:append=\"show2 = !show2\"\r\n                          hint=\"Min. 4 Caracteres\"\r\n                          label=\"Confirmar Senha\"\r\n                          :value=\"this.ConfirmPass  = (this.ConfirmPass  == null) ? this.ConfirmPass  : this.ConfirmPass.toUpperCase()\"\r\n                          required\r\n                        ></v-text-field>\r\n                  </v-col>\r\n                </v-row> \r\n                <v-row>\r\n                  <v-col cols=\"12\"\r\n                        style=\"display: inline-block\">\r\n                        <v-text-field\r\n                      v-model=\"formData.Email\"\r\n                      :rules=\"emailRules\"\r\n                      label=\"E-mail\"\r\n                      :value=\"formData.Email = (formData.Email== null) ? formData.Email : formData.Email.toUpperCase()\"\r\n                      required\r\n                    ></v-text-field>\r\n                    \r\n                  </v-col>\r\n                  \r\n                </v-row>\r\n              </v-container>\r\n            </v-form>\r\n            \r\n          </v-col>\r\n          <!--<Message :msg=\"msg\" v-show=\"msg\"/>-->\r\n        </v-row>\r\n      </template>\r\n  </FormUpdate>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\nimport FormUpdate from \"@/components/FormUpdate.vue\";\r\nimport api from '@/services/api.ts';\r\nimport * as validations from '@/services/validation.ts';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name:\"users\",\r\n  props: true,\r\n  props: {\r\n      id: { \r\n        type: Number\r\n      }\r\n  },\r\n  components: {\r\n    FormUpdate\r\n  },\r\n  data: () => ({\r\n    title: \"\",\r\n    msg: \"\",\r\n    editing: false,\r\n    show1: false,\r\n    show2: false,\r\n    ConfirmPass:\"\",\r\n    formData: {\r\n      Id: 0,\r\n      Login: \"\",\r\n      Password: \"\",\r\n      Email: \"\"\r\n    },\r\n    loginRules: [\r\n      v => v.length >= 4 || 'Min. 4 Caracteres',\r\n      v => !!v || 'Login é Obrigatório'\r\n    ],\r\n    rules: {\r\n      required: value => !!value || 'Senha é Obrigatória.',\r\n      min: v => v.length >= 4 || 'Min. 4 Caracteres'\r\n      //equal: value => value != this.formData.Password || 'Senha é Obrigatória.',\r\n    },\r\n    emailRules: [\r\n      v => !!v || 'E-mail é Obrigatório.',\r\n      v => /.+@.+\\..+/.test(v) || 'E-mail Invalido',\r\n    ]\r\n  }),\r\n created(){\r\n    this.id = this.$route.params.id;\r\n    this.title = \"Inserir Usuário\";\r\n    if(this.id > 0){\r\n      this.title=\"Alterar Usuário\";\r\n      this.editing= true;\r\n      this.formData.Id = this.id;\r\n      this.getUser();\r\n    }\r\n  },\r\n  methods:{\r\n    cleanForm () {\r\n      this.formData.Login = \"\";\r\n      this.formData.Password = \"\";\r\n      this.formData.Email = \"\";\r\n    },\r\n    validacao() {\r\n      let retorno =true;\r\n      if(this.formData.Login.length == 0 || \r\n          this.formData.Password.length == 0 || \r\n          this.ConfirmPass == 0 ||\r\n          this.formData.Email.length == 0) {\r\n          retorno= false;\r\n          this.msg = \"Dados Incorretos!\";\r\n          setTimeout(() => this.msg=\"\", 3000);\r\n      }\r\n      return retorno;\r\n    },\r\n    async onSave () {\r\n      if(this.validacao() == true ){\r\n        if(this.editing == true){\r\n          await api.put(`/Users/${this.id}`,this.formData)\r\n            .then((response) => {\r\n            })\r\n            .catch((error) => {\r\n              console.log(error.response)\r\n            })\r\n        }else{\r\n          console.log('aaaaa');\r\n          await api.post(`/Users`,this.formData)\r\n            .then((response) => {\r\n              this.msg = response.data\r\n            })\r\n            .catch((error) => {\r\n              console.log(error.response)\r\n            })\r\n        }\r\n        //setTimeout(() => this.msg=\"\", 3000);\r\n        this.$router.go(-1);\r\n      }\r\n    },\r\n    async getUser(){\r\n      await api.get(\"/Users/\"+this.id)\r\n            .then((response) => {\r\n              this.formData.Id = response.data.Id;\r\n              this.formData.Login = response.data.Login;\r\n              this.formData.Password = response.data.Password;\r\n              this.ConfirmPass = response.data.Password;\r\n              this.formData.Email = response.data.Email;\r\n            })\r\n            .catch((error) => {\r\n              console.log(error.response)\r\n            })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}