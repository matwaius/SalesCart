{"ast":null,"code":"import SidebarLayoutVue from \"@/layouts/SidebarLayout.vue\";\nimport api from '@/services/api.ts';\nimport { watch } from 'vue';\nexport default {\n  name: \"FormList\",\n  components: {\n    SidebarLayoutVue\n  },\n  props: {\n    title: String,\n    tableHeader: [],\n    tableItems: []\n  },\n  data: () => ({\n    field_produto: [],\n    produtos: [],\n    field_quantidade: 0,\n    field_obs: \"\",\n    field_total: 0,\n    pageCount: 0,\n    pageNumber: 0,\n    formOrders: {\n      id: 0,\n      customerID: 0,\n      total_order: 0,\n      created_at: \"\",\n      comments: \"\",\n      products: [{\n        orderID: 0,\n        customerID: 0,\n        quantity: 0,\n        created_at: \"\",\n        unit_price: 0,\n        total_price: 0\n      }]\n    }\n  }),\n\n  created() {\n    this.getProducts();\n  },\n\n  methods: {\n    async getProducts() {\n      await api.get(`/Product`, this.formOrders).then(response => {\n        this.produtos = response.data;\n      }).catch(error => {\n        console.error(error.response);\n      });\n    },\n\n    async onSave() {\n      this.formOrders.customerID = 1;\n      this.formOrders.total_order = this.field_total;\n      this.formOrders.comments = this.field_obs;\n      await api.post(`/Orders`, this.formOrders).then(response => {\n        this.formOrders = response.data.customerID;\n      }).catch(error => {\n        console.error(error.response);\n      });\n      console.log(error.response);\n    },\n\n    onInsertItem() {\n      if (this.validation() == true) {\n        this.tableItems.push({\n          id: this.field_produto.id,\n          name: this.field_produto.name,\n          quantity: this.field_quantidade,\n          unit_price: this.field_produto.price,\n          total_price: this.field_quantidade * this.field_produto.price\n        });\n        this.field_total += this.field_quantidade * this.field_produto.price;\n      }\n    },\n\n    onDeleteItem(item) {\n      this.field_total -= item.total_price;\n      this.tableItems.splice(this.tableItems.findIndex(f => f == item), 1);\n    },\n\n    validation() {\n      if (this.field_quantidade <= 0 || this.tableItems.findIndex(f => f.id == this.field_produto.id) >= 0) {\n        return false;\n      }\n\n      return true;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAyIA;AACA;AACA;AAEA;EACAA,gBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACAC,aADA;IAEAC,eAFA;IAGAC;EAHA,CALA;EAUAC;IACAC,iBADA;IAEAC,YAFA;IAGAC,mBAHA;IAIAC,aAJA;IAKAC,cALA;IAMAC,YANA;IAOAC,aAPA;IAQAC;MACAC,KADA;MAEAC,aAFA;MAGAC,cAHA;MAIAC,cAJA;MAKAC,YALA;MAMAC;QACAC,UADA;QAEAL,aAFA;QAGAM,WAHA;QAIAJ,cAJA;QAKAK,aALA;QAMAC;MANA;IANA;EARA,EAVA;;EAmCAC;IACA;EACA,CArCA;;EAsCAC;IACA;MACA,2CACAC,IADA,CACAC;QACA;MACA,CAHA,EAIAC,KAJA,CAIAC;QACAC;MACA,CANA;IAOA,CATA;;IAUA;MACA;MACA;MACA;MACA,2CACAJ,IADA,CACAC;QACA;MACA,CAHA,EAIAC,KAJA,CAIAC;QACAC;MACA,CANA;MAOAA;IACA,CAtBA;;IAuBAC;MACA;QACA;UAAAjB;UACAhB,6BADA;UAEAuB,+BAFA;UAGAC,oCAHA;UAIAC;QAJA;QAKA;MACA;IACA,CAhCA;;IAiCAS;MACA;MACA;IACA,CApCA;;IAqCAC;MACA;QACA;MACA;;MACA;IACA;;EA1CA;AAtCA","names":["name","components","SidebarLayoutVue","props","title","tableHeader","tableItems","data","field_produto","produtos","field_quantidade","field_obs","field_total","pageCount","pageNumber","formOrders","id","customerID","total_order","created_at","comments","products","orderID","quantity","unit_price","total_price","created","methods","then","response","catch","error","console","onInsertItem","onDeleteItem","validation"],"sourceRoot":"src/components","sources":["FormList.vue"],"sourcesContent":["<template>\r\n  <sidebar-layout-vue>\r\n    <v-container class=\"fill-height flex-column\">\r\n        <v-card :width=\"800\"\r\n          height=\"100%\"\r\n          max-height=\"600\"\r\n          class=\"mx-auto\"\r\n          outilined\r\n          elevation=\"3\">\r\n          <v-container>\r\n            <!--CABEÇALHO-->\r\n            <v-row dense>\r\n              <v-col cols=\"12\">\r\n                <v-toolbar flat\r\n                        rounded\r\n                        dense\r\n                        class=\"blue-grey lighten-4\">\r\n                  <v-toolbar-title class=\"font-weight-medium\">{{title}}</v-toolbar-title> \r\n                </v-toolbar>\r\n              </v-col>\r\n            </v-row>\r\n            <!--ITEMS-->\r\n            <v-row dense>\r\n              <v-col>\r\n                <v-data-table no-data-text=\"Nenhum Registro Disponível\"\r\n                              no-results-text=\"Nenhum Registro Encontrado\"\r\n                              dense\r\n                              fixed-header\r\n                              height=\"352px\"\r\n                              class=\"elevation-3\"\r\n                              item-key=\"Id\"\r\n                              single-select\r\n                              hide-default-footer\r\n                              :headers=\"tableHeader\"\r\n                              :items=\"tableItems\"\r\n                              :items-per-page=\"10\">\r\n                  <template v-slot:item.actions=\"{item}\">\r\n                      <v-tooltip bottom color=\"primary\">\r\n                        <template v-slot:activator=\"{on, attrs}\">\r\n                          <v-icon small\r\n                              color=\"primary\"\r\n                              v-bind=\"attrs\"\r\n                              v-on=\"on\"\r\n                              class=\"mr-2\"\r\n                              :disabled=\"false\"\r\n                              @click=\"onDeleteItem(item)\">\r\n                              mdi-delete\r\n                          </v-icon>\r\n                        </template>\r\n                        <span>Excluir</span>\r\n                      </v-tooltip>\r\n                  </template>\r\n                </v-data-table>\r\n              </v-col>\r\n            </v-row>\r\n            <v-container>\r\n              <v-row dense>\r\n                <v-col cols=\"7\"\r\n                  style=\"display: inline-block\">\r\n                  <v-select label=\"Produtos\"\r\n                            v-model=\"field_produto\"\r\n                            item-value=\"id\"\r\n                            item-text=\"name\"\r\n                            :items=\"produtos\"\r\n                            return-object>\r\n                  </v-select>\r\n                </v-col>\r\n                <v-col cols=\"2\"\r\n                  style=\"display: inline-block\">\r\n                  <v-text-field label=\"Quantidade\"\r\n                            v-model=\"field_quantidade\"\r\n                            type=\"number\"\r\n                            :value=\"field_quantidade = (field_quantidade == null) ? 0 :  field_quantidade\">\r\n                  </v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"2\"\r\n                  style=\"display: inline-block\">\r\n                  <v-text-field label=\"Preço\"\r\n                            v-model=\"field_produto.price\"\r\n                            type=\"number\"\r\n                            :disabled = \"true\"\r\n                            :value=\"field_produto.price = (field_produto.price == null) ? 0 :  field_produto.price\">\r\n                  </v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"1\">\r\n                  <v-btn icon\r\n                        color=\"primary\"\r\n                        @click=\"onInsertItem\">\r\n                        <v-icon>mdi-file-plus</v-icon>\r\n                  </v-btn>\r\n                </v-col>\r\n              </v-row>\r\n              <v-row>\r\n                <v-col cols=\"7\"\r\n                  style=\"display: inline-block\">\r\n                  <v-text-field label=\"Observação\"\r\n                            v-model=\"field_obs\"\r\n                            :value=\"field_obs = (field_obs == null) ? '' :  field_obs\">\r\n                  </v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"2\"\r\n                  style=\"display: inline-block\">\r\n                  <v-text-field label=\"Total Pedido\"\r\n                            v-model=\"field_total\"\r\n                            type=\"number\"\r\n                            :disabled=\"true\"\r\n                            :value=\"field_total = (field_total == null) ? 0 :  field_total\">\r\n                  </v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"2\">\r\n                  \r\n                  <v-btn color=\"success\"\r\n                        small\r\n                        elevation=\"5\"\r\n                        style=\"margin: 0 15px\"\r\n                        @click=\"onSave\">\r\n                        <v-icon left> mdi-checkbox-marked-circle</v-icon>\r\n                        Finalizar\r\n                  </v-btn>\r\n                </v-col>\r\n              </v-row>\r\n            </v-container>\r\n            <v-row dense justify=\"center\">\r\n              <v-pagination v-if=\"pageCount>0\"\r\n                    v-model=\"pageNumber\"\r\n                    circle\r\n                    prev-icon=\"mdi-menu-left\"\r\n                    next-icon=\"mdi-menu-right\"\r\n                    :length=\"pageCount\"></v-pagination>\r\n            </v-row>\r\n          </v-container>\r\n        </v-card>\r\n    </v-container>\r\n  </sidebar-layout-vue>\r\n</template>\r\n\r\n<script>\r\nimport SidebarLayoutVue from \"@/layouts/SidebarLayout.vue\";\r\nimport api from '@/services/api.ts';\r\nimport { watch } from 'vue';\r\n\r\nexport default {\r\n  name:\"FormList\",\r\n  components: {\r\n    SidebarLayoutVue\r\n  },\r\n  props: {\r\n      title: String,\r\n      tableHeader: [],\r\n      tableItems: [],\r\n  },\r\n  data: () => ({\r\n    field_produto: [],\r\n    produtos: [],\r\n    field_quantidade: 0,\r\n    field_obs:\"\",\r\n    field_total:0,\r\n    pageCount: 0,\r\n    pageNumber: 0,\r\n    formOrders: {\r\n      id:0,\r\n      customerID: 0,\r\n      total_order: 0,\r\n      created_at: \"\",\r\n      comments: \"\",\r\n      products: [{\r\n        orderID: 0,\r\n        customerID: 0,\r\n        quantity: 0,\r\n        created_at: \"\",\r\n        unit_price: 0,\r\n        total_price: 0,\r\n      }]\r\n    },\r\n    \r\n  }),\r\n  created() {\r\n      this.getProducts();\r\n  },\r\n  methods:{\r\n    async getProducts(){\r\n      await api.get(`/Product`, this.formOrders)\r\n            .then((response) => {\r\n              this.produtos = response.data;\r\n            })\r\n            .catch((error) => {\r\n              console.error(error.response)\r\n            })\r\n    },\r\n    async onSave(){\r\n      this.formOrders.customerID = 1;\r\n      this.formOrders.total_order = this.field_total;\r\n      this.formOrders.comments = this.field_obs;\r\n      await api.post(`/Orders`,this.formOrders)\r\n            .then((response) => {\r\n              this.formOrders = response.data.customerID;\r\n            })\r\n            .catch((error) => {\r\n              console.error(error.response)\r\n            })\r\n            console.log(error.response);\r\n    },\r\n    onInsertItem(){\r\n        if (this.validation() == true){\r\n            this.tableItems.push({id:this.field_produto.id,\r\n                              name:this.field_produto.name,\r\n                              quantity:this.field_quantidade,\r\n                              unit_price:this.field_produto.price,\r\n                              total_price:this.field_quantidade * this.field_produto.price});\r\n            this.field_total += this.field_quantidade * this.field_produto.price;\r\n        }\r\n    },\r\n    onDeleteItem(item){\r\n        this.field_total -= item.total_price;\r\n        this.tableItems.splice(this.tableItems.findIndex(f => f==item),1);      \r\n    },\r\n    validation(){\r\n        if(this.field_quantidade <= 0 || this.tableItems.findIndex(f => f.id==this.field_produto.id)>=0){\r\n          return false;\r\n        }\r\n        return true;\r\n    }\r\n  },\r\n\r\n}\r\n\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}